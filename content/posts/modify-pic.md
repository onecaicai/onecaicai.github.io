---
title: " 图片处理工具 - 重命名、调整尺寸并清除EXIF"
date: 2024-08-12T17:41:27+08:00
draft: false
author: "OneCai"
tags: ["图片处理", "Python", "工具开发"]
categories: ["技术分享"]
summary: "用Python开发的图片批量处理工具，支持智能调整尺寸、清除EXIF信息和批量重命名功能。"
description: ""
keywords: [""]
ShowToc: true
TocOpen: true

---

从相册导入了几张图片，发现里面有设备信息之类的个人信息，网上找了几个工具，有的需要付费，有些干脆不能使用，提交cursor这个需求，用python实现了两个功能，一个是删除隐私信息，一个是调整图片宽度。

>  地址：https://github.com/onecaicai/image-resize-clean

## 程序简介

这是一个图片批量处理工具，可以自动完成以下操作：
1. **批量重命名**：将图片按指定关键字重命名
2. **智能调整尺寸**：根据图片方向自动调整到合适尺寸
3. **清除EXIF信息**：保护隐私，移除图片的元数据信息

## 功能特点

### 🎯 智能尺寸调整

- **横版图片**：限制宽度为850px，高度按比例缩放
- **竖版图片**：限制高度为850px，宽度按比例缩放
- **保持比例**：使用高质量的LANCZOS算法，确保图片质量

### 🔒 隐私保护
- **清除EXIF**：完全移除图片的EXIF元数据信息
- **保护隐私**：防止个人信息泄露

### 📝 批量重命名
- **统一格式**：按"关键字-序号"格式重命名
- **保持扩展名**：自动识别并保持原始文件格式
- **支持格式**：JPG、JPEG、PNG、WEBP

## 使用方法

### 方法一：命令行参数（推荐）
```bash
python3 resize_clean.py <图片目录路径>
```

**示例：**
```bash
python3 resize_clean.py /path/to/your/images
```

### 方法二：交互模式
```bash
python3 resize_clean.py
```
然后按提示输入目录路径和重命名关键字。

## 程序流程

1. **输入验证**：检查目录是否存在
2. **文件扫描**：扫描目录中的所有图片文件
3. **重命名规划**：显示重命名预览
4. **尺寸调整**：根据图片方向智能调整尺寸
5. **EXIF清除**：移除所有元数据信息
6. **保存输出**：保存到`resized`子目录

## 输出结果

- **输出目录**：在输入目录下创建`resized`文件夹
- **文件命名**：`关键字-序号.扩展名`（如：`trip-01.jpg`）
- **尺寸标准**：最大边长850px，保持原始比例

## 测试结果

### 测试环境
- 操作系统：macOS 25.0.0
- Python版本：3.x
- 依赖库：Pillow (PIL)

### 测试用例
1. **横版图片** (1920x1080) → (850x478) ✅
2. **竖版图片** (1080x1920) → (478x850) ✅  
3. **方形图片** (1000x1000) → (850x850) ✅

### 功能验证
- ✅ 重命名功能正常
- ✅ 尺寸调整准确
- ✅ EXIF信息已清除
- ✅ 图片质量保持良好

## 系统要求

### 必需依赖
```bash
pip install Pillow
```

### 支持的文件格式
- JPEG (.jpg, .jpeg)
- PNG (.png)
- WebP (.webp)

## 注意事项

1. **备份原图**：程序会修改原图，建议先备份
2. **目录权限**：确保对输入目录有读写权限
3. **磁盘空间**：确保有足够空间存储处理后的图片
4. **文件格式**：只处理支持的图片格式，其他文件会被忽略

## 错误处理

程序包含完善的错误处理机制：
- 目录不存在时提示错误
- 文件处理失败时继续处理其他文件
- 输入验证确保参数正确

## 技术细节

### 核心算法
- **尺寸计算**：基于最大边长850px的比例缩放
- **重采样算法**：LANCZOS（高质量）
- **EXIF清除**：使用`exif=b''`参数

### 性能优化
- 批量处理提高效率
- 内存友好的图片处理
- 错误隔离不影响整体处理

## 更新日志

- **v1.0**：基础功能实现
  - 批量重命名
  - 智能尺寸调整
  - EXIF信息清除

## 许可证

本程序为开源软件，可自由使用和修改。

---

**开发者提示**：如需修改目标尺寸，请编辑代码中的`target_width`变量（当前为850px）。
